<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JSON Schema</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/json-schema.css">
    <link rel="stylesheet" href="css/pikaday.css">
</head>
<body>

    <div class="header">
        <h1>JSON Schema</h1>
    </div>

    <div class="main"></div>

    <div class="op-data">
        <textarea id="op-textarea"></textarea>
        <a class="btn btn-primary" href="javascript:;" id="get-json">获取JSON</a>
        <a class="btn btn-success" href="javascript:;" id="set-json">设置JSON</a>
    </div>

    <script type="text/template" id="tmpl-box">
    <div class="js-box">
        <div class="js-box-head" style="display:none;">
            <a href="javascript:;"><i class="icon-bookmark"></i> Drag</a>
        </div>
        <div class="js-data">
            <div class="js-table"></div>
        </div>
    </div>
    </script>

    <script type="text/template" id="tmpl-extend">
    <div class="js-extend" style="display:none;">
        <div class="js-list-head">
            <a class="js-list-name"><i class="$node_type_class$"></i> $node_name$</a>
            <a href="javascript:;" class="js-list-add btn btn-primary" style="display:none;"><i class="icon-plus"></i> 添加</a>
        </div>
        <div class="js-list-body"></div>
    </div>
    </script>

    <script type="text/template" id="tmpl-table-item">
    <div class="js-table-item">
        <div class="js-table-key">
            <a href="javascript:;" class="btn $color$" tabIndex="-1"><i class="$node_type_class$"></i> $node_name$</a>
        </div>
        <div class="js-table-value"></div>
    </div>
    </script>
    
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery.sortable.js"></script>
    <script type="text/javascript" src="js/moment.min.js"></script>
    <script type="text/javascript" src="js/jquery.pikaday.js"></script>

    <script type="text/javascript" src="js/json-schema.js"></script>
    <script type="text/javascript">
        var dataSchema = [{"key":"title","desc":"title","type":"leaf"},{"key":"content","desc":"content","type":"object","struct":[{"key":"title","desc":"t","type":"leaf"},{"key":"text","desc":"tt","type":"leaf"}]},{"key":"comments","desc":"comments","type":"list","struct":[{"key":"text","desc":"text","type":"leaf"},{"key":"body","desc":"body","type":"object","struct":[{"key":"text","desc":"t","type":"leaf","input":{"type":"text"}},{"key":"time","desc":"time","type":"leaf","input":{"type":"time"}},{"key":"image","desc":"image","type":"leaf","input":{"type":"image"}}]},{"key":"score","desc":"score","type":"leaf"}]},{"key":"version","desc":"version","type":"leaf"},{"key":"notice","desc":"notice","type":"leaf"}];

        var currentData = {};

        var dataEditor = new JsonSchema.dataEditor({
            root: $(".main"),
            schema: dataSchema,
            data: currentData
        });

        $("#set-json").on("click", function() {
            dataEditor.setData(JSON.parse($("#op-textarea").val()));
        });

        $("#get-json").on("click", function() {
            $("#op-textarea").val(dataEditor.getJSON());
        });
    </script>
</body>
</html>