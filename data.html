<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JSON Schema</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/json-schema.css">
    <link rel="stylesheet" href="css/pikaday.css">
</head>
<body>

    <div class="header">
        <h1>JSON Schema</h1>
    </div>

    <div class="main"></div>

    <div class="op-data">
        <textarea id="op-textarea"></textarea>
        <a class="btn btn-primary" href="javascript:;" id="get-json">获取JSON</a>
        <a class="btn btn-success" href="javascript:;" id="set-json">设置JSON</a>
    </div>

    <script type="text/template" id="tmpl-box">
    <div class="js-box">
        <div class="js-box-head" style="display:none;">
            <a href="javascript:;"><i class="icon-bookmark"></i> Drag</a>
        </div>
        <div class="js-data">
            <div class="js-table"></div>
        </div>
    </div>
    </script>

    <script type="text/template" id="tmpl-extend">
    <div class="js-extend" style="display:none;">
        <div class="js-list-head">
            <a class="js-list-name"><i class="$node_type_class$"></i> $node_name$</a>
            <a href="javascript:;" class="js-list-add btn btn-primary" style="display:none;"><i class="icon-plus"></i> 添加</a>
        </div>
        <div class="js-list-body"></div>
    </div>
    </script>

    <script type="text/template" id="tmpl-table-item">
    <div class="js-table-item">
        <div class="js-table-key">
            <a href="javascript:;" class="btn $color$" tabIndex="-1"><i class="$node_type_class$"></i> $node_name$</a>
        </div>
        <div class="js-table-value"></div>
    </div>
    </script>

    <div id="upload-image" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="upload-image-label" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="upload-image-label">上传图片</h3>
        </div>
        <div class="modal-body">
            <div class="modal-body-left">
                <label>存储路径选择</label>
                <select name="path">
                    <option value="1">/a/b</option>
                    <option value="2">/a/c</option>
                    <option value="3">/a/d</option>
                </select>
                <label>类型</label>
                <select name="type">
                    <option value="1">Type A</option>
                    <option value="2">Type B</option>
                    <option value="3">Type C</option>
                </select>
                <label>上传图片</label>
                <a href="javascript:;" class="btn btn-primary">Upload</a>
            </div>
            <div class="modal-body-right">
                <img src="img/gyy.jpg" alt="" style="height:150px">
            </div>
            <div style="clear:both; height:0;"></div>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">取消</button>
            <button class="btn btn-primary">保存</button>
        </div>
    </div>
    
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery.sortable.js"></script>
    <script type="text/javascript" src="js/moment.min.js"></script>
    <script type="text/javascript" src="js/jquery.pikaday.js"></script>

    <script type="text/javascript" src="js/json-schema.js"></script>
    <script type="text/javascript">
        // var dataSchema = [{"key":"title","desc":"title","type":"leaf"},{"key":"content","desc":"content","type":"object","struct":[{"key":"title","desc":"t","type":"leaf"},{"key":"text","desc":"tt","type":"leaf"}]},{"key":"comments","desc":"comments","type":"list","struct":[{"key":"text","desc":"text","type":"leaf"},{"key":"body","desc":"body","type":"object","struct":[{"key":"text","desc":"t","type":"leaf","input":{"type":"text"}},{"key":"time","desc":"time","type":"leaf","input":{"type":"time"}},{"key":"image","desc":"image","type":"leaf","input":{"type":"image"}}]},{"key":"score","desc":"score","type":"leaf"}]},{"key":"version","desc":"version","type":"leaf"},{"key":"notice","desc":"notice","type":"leaf"}];

        // var dataSchema = [{"key":"root","desc":"root","type":"list","struct":[{"key":"remarks","desc":"备注","type":"leaf"},{"key":"expand","desc":"是否展开","type":"leaf"},{"key":"title","desc":"标题","type":"leaf"},{"key":"list","desc":"列表信息","type":"object","struct":[{"key":"title","desc":"标题","type":"leaf"},{"key":"web_url","desc":"web url","type":"leaf"},{"key":"wap_url","desc":"wap url","type":"leaf"},{"key":"highlight","desc":"是否高亮","type":"leaf"},{"key":"remarks","desc":"备注","type":"leaf"}]}]}];
        
        var dataSchema = [{"key":"root","desc":"root","type":"list","struct":[{"key":"remarks","desc":"备注","type":"leaf"},{"key":"expand","desc":"是否展开","type":"leaf"},{"key":"title","desc":"标题","type":"leaf"},{"key":"list","desc":"列表信息","type":"list","struct":[{"key":"title","desc":"标题","type":"leaf"},{"key":"web_url","desc":"web url","type":"leaf"},{"key":"wap_url","desc":"wap url","type":"leaf"},{"key":"highlight","desc":"是否高亮","type":"leaf"},{"key":"remarks","desc":"备注","type":"leaf"},{"key":"time","desc":"时间","type":"leaf","input":{"type":"time"}},{"key":"image","desc":"图片","type":"leaf","input":{"type":"image"}}]}]}];

        var currentData = {
            root: [{
                remarks: '这是一个备注',
                expand: 1,
                title: '这是一个标题',
                list: [{
                    title: '标题标题',
                    web_url: 'http://www.baidu.com',
                    wap_url: 'http://m.baidu.com',
                    highlight: 1,
                    remarks: '没啥了',
                    time: '2013-07-10',
                    image: ''
                }]
            }, {
                remarks: '这是另一个备注',
                expand: 1,
                title: '这是另一个标题',
                list: [{
                    title: '标题标题2222',
                    web_url: 'http://www.baidu.com/video',
                    wap_url: 'http://m.baidu.com/video',
                    highlight: 1,
                    remarks: '没啥了',
                    time: '2013-07-12',
                    image: ''
                }]
            }]
        };

        var dataEditor = new JsonSchema.dataEditor({
            root: $(".main"),
            schema: dataSchema,
            data: currentData
        });

        $("#set-json").on("click", function() {
            dataEditor.setData(JSON.parse($("#op-textarea").val()));
        });

        $("#get-json").on("click", function() {
            $("#op-textarea").val(dataEditor.getJSON());
        });
    </script>
</body>
</html>